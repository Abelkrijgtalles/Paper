From 3aeeaf31b7a7f888f54e47826e8ec0ddbe65c4bf Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 14:37:42 +0100
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/world/level/block/FlowerPotBlock.java b/net/minecraft/world/level/block/FlowerPotBlock.java
index c1d5544ed956c967dd0e76f5c9394e744f9576e1..b1264a255b2c8fe5a7b447924d48cf6fdce80d24 100644
--- a/net/minecraft/world/level/block/FlowerPotBlock.java
+++ b/net/minecraft/world/level/block/FlowerPotBlock.java
@@ -67,6 +67,18 @@ public class FlowerPotBlock extends Block {
         } else if (!this.isEmpty()) {
             return InteractionResult.CONSUME;
         } else {
+            // Paper start - Add PlayerFlowerPotManipulateEvent
+            org.bukkit.block.Block block = org.bukkit.craftbukkit.block.CraftBlock.at(level, pos);
+            org.bukkit.inventory.ItemStack placedStack = org.bukkit.craftbukkit.inventory.CraftItemStack.asBukkitCopy(stack);
+
+            io.papermc.paper.event.player.PlayerFlowerPotManipulateEvent event = new io.papermc.paper.event.player.PlayerFlowerPotManipulateEvent((org.bukkit.entity.Player) player.getBukkitEntity(), block, placedStack, true);
+            if (!event.callEvent()) {
+                // Update client
+                player.containerMenu.sendAllDataToRemote();
+
+                return InteractionResult.CONSUME;
+            }
+            // Paper end - Add PlayerFlowerPotManipulateEvent
             level.setBlock(pos, blockState, 3);
             level.gameEvent(player, GameEvent.BLOCK_CHANGE, pos);
             player.awardStat(Stats.POT_FLOWER);
@@ -81,6 +93,18 @@ public class FlowerPotBlock extends Block {
             return InteractionResult.CONSUME;
         } else {
             ItemStack itemStack = new ItemStack(this.potted);
+            // Paper start - Add PlayerFlowerPotManipulateEvent
+            org.bukkit.block.Block block = org.bukkit.craftbukkit.block.CraftBlock.at(level, pos);
+            org.bukkit.inventory.ItemStack pottedStack = new org.bukkit.inventory.ItemStack(org.bukkit.craftbukkit.block.CraftBlockType.minecraftToBukkit(this.potted));
+
+            io.papermc.paper.event.player.PlayerFlowerPotManipulateEvent event = new io.papermc.paper.event.player.PlayerFlowerPotManipulateEvent((org.bukkit.entity.Player) player.getBukkitEntity(), block, pottedStack, false);
+            if (!event.callEvent()) {
+                // Update client
+                player.containerMenu.sendAllDataToRemote();
+
+                return InteractionResult.PASS;
+            }
+            // Paper end - Add PlayerFlowerPotManipulateEvent
             if (!player.addItem(itemStack)) {
                 player.drop(itemStack, false);
             }
