From 3aeeaf31b7a7f888f54e47826e8ec0ddbe65c4bf Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 14:37:42 +0100
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/world/item/component/SuspiciousStewEffects.java b/net/minecraft/world/item/component/SuspiciousStewEffects.java
index 3accff756875a5c52e58079a1290d8cac9094a0d..0fd2efad017cb4f46ff7972b5ba4479ffc749158 100644
--- a/net/minecraft/world/item/component/SuspiciousStewEffects.java
+++ b/net/minecraft/world/item/component/SuspiciousStewEffects.java
@@ -41,6 +41,15 @@ public record SuspiciousStewEffects(List<SuspiciousStewEffects.Entry> effects) i
         }
     }
 
+    // CraftBukkit start
+    @Override
+    public void cancelUsingItem(net.minecraft.server.level.ServerPlayer player, ItemStack stack, List<net.minecraft.network.protocol.Packet<? super net.minecraft.network.protocol.game.ClientGamePacketListener>> collectedPackets) { // Paper - properly resend entities - collect packets for bundle
+        for (SuspiciousStewEffects.Entry entry : this.effects) {
+            collectedPackets.add(new net.minecraft.network.protocol.game.ClientboundRemoveMobEffectPacket(player.getId(), entry.effect())); // Paper - bundlize packets
+        }
+    }
+    // CraftBukkit end
+
     @Override
     public void addToTooltip(Item.TooltipContext context, Consumer<Component> tooltipAdder, TooltipFlag tooltipFlag) {
         if (tooltipFlag.isCreative()) {
