From 3aeeaf31b7a7f888f54e47826e8ec0ddbe65c4bf Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 14:37:42 +0100
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/world/item/WrittenBookItem.java b/net/minecraft/world/item/WrittenBookItem.java
index 810f952acf0bf46db943fa9aa4ccf52ed843e192..4019c9f08de2db7da79aee9d0d23587b2242d3d6 100644
--- a/net/minecraft/world/item/WrittenBookItem.java
+++ b/net/minecraft/world/item/WrittenBookItem.java
@@ -41,7 +41,7 @@ public class WrittenBookItem extends Item {
 
     public static boolean resolveBookComponents(ItemStack bookStack, CommandSourceStack resolvingSource, @Nullable Player resolvingPlayer) {
         WrittenBookContent writtenBookContent = bookStack.get(DataComponents.WRITTEN_BOOK_CONTENT);
-        if (writtenBookContent != null && !writtenBookContent.resolved()) {
+        if (io.papermc.paper.configuration.GlobalConfiguration.get().itemValidation.resolveSelectorsInBooks && writtenBookContent != null && !writtenBookContent.resolved()) { // Paper - Disable component selector resolving in books by default
             WrittenBookContent writtenBookContent1 = writtenBookContent.resolve(resolvingSource, resolvingPlayer);
             if (writtenBookContent1 != null) {
                 bookStack.set(DataComponents.WRITTEN_BOOK_CONTENT, writtenBookContent1);
