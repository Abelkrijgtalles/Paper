From 3aeeaf31b7a7f888f54e47826e8ec0ddbe65c4bf Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 14:37:42 +0100
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/world/level/block/BushBlock.java b/net/minecraft/world/level/block/BushBlock.java
index f7aebd71e972562f2f7cbaa3c36f46ee3102d0b4..bc52568bfa56635300266424488e524d77d95e09 100644
--- a/net/minecraft/world/level/block/BushBlock.java
+++ b/net/minecraft/world/level/block/BushBlock.java
@@ -35,9 +35,15 @@ public abstract class BushBlock extends Block {
         BlockState neighborState,
         RandomSource random
     ) {
-        return !state.canSurvive(level, pos)
-            ? Blocks.AIR.defaultBlockState()
-            : super.updateShape(state, level, scheduledTickAccess, pos, direction, neighborPos, neighborState, random);
+       // CraftBukkit start
+       if (!state.canSurvive(level, pos)) {
+           // Suppress during worldgen
+           if (!(level instanceof net.minecraft.server.level.ServerLevel serverLevel && serverLevel.hasPhysicsEvent) || !org.bukkit.craftbukkit.event.CraftEventFactory.callBlockPhysicsEvent(serverLevel, pos).isCancelled()) { // Paper
+               return Blocks.AIR.defaultBlockState();
+           }
+       }
+       return super.updateShape(state, level, scheduledTickAccess, pos, direction, neighborPos, neighborState, random);
+       // CraftBukkit end
     }
 
     @Override
